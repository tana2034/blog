<!DOCTYPE html>
<html lang="en" dir="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="noindex, nofollow">
<title>Docs | tana2034</title>
<meta name="keywords" content="">
<meta name="description" content="Docs - tana2034">
<meta name="author" content="tana2034">
<link rel="canonical" href="http://localhost:1313/docs/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.8fe10233a706bc87f2e08b3cf97b8bd4c0a80f10675a143675d59212121037c0.css" integrity="sha256-j&#43;ECM6cGvIfy4Is8&#43;XuL1MCoDxBnWhQ2ddWSEhIQN8A=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://localhost:1313/apple-touch-icon.png">
<link rel="mask-icon" href="http://localhost:1313/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" type="application/rss+xml" href="http://localhost:1313/docs/index.xml">
<link rel="alternate" hreflang="en" href="http://localhost:1313/docs/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
</head>

<body class="list" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="tana2034 (Alt + H)">tana2034</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main"> 
<header class="page-header"><div class="breadcrumbs"><a href="http://localhost:1313/">Home</a></div>
  <h1>
    Docs
  </h1>
</header>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">ペアプロ／モブプロについて学ぶ
    </h2>
  </header>
  <div class="entry-content">
    <p>ペアプロ／モブプロについて学ぶ WEB&#43;DB Press vol.102の特集「はじめてのペアプロ・モブプロ」を参考に、ペアプロ・モブプロについて学びました。
ペアプログラミング・モブプログラミングとは プログラミングとプログラムの改良を2人で行うことをペアプログラミングという。 これを複数人（3〜5人）でやる場合、モブプログラミングという。
ロールについて キーボードの前に実際に座っている人は「ドライバー」、ドライバーの隣に座り、ドライバーと会話しながら導く人を「ナビゲーター」と呼び、この「ドライバー」がメインでコーディングをしていく。「ナビゲーター」はドライバーと会話をしながら、ドライバーを導く。「ドライバー」は一人でずっとこなすのではなく、交代するのが普通。
ペアプロ／モブプロのメリット 作業への集中と質の向上 一人ではないので緊張感が生まれ、集中することができる 考えていることを口に出しながらプログラミングを行うため、発話による思考の整理ができる リアルタイムで指摘できるため、コードの可読性、保守性が向上する 他の人の目にふれるため、軽微なミスが減る 知識と学びの共有 新人教育などで利用すると、リアルタイムで知見が共有できる コードからだけでなく、コーディングの過程から学ぶことができる 複数人でコーディングするため、実装内容について情報が共有できる 楽しさとチームビルディング 在庫を減らし、スループットを最大化できる Pull Requestのレビューはプロジェクトの進行においてボトルネックになりがち Pull Requestがいくつも貯まると、以下の事象が発生する ベテランはコードを書くのをやめ、レビューに専念する レビュー速度を上げるため、一つ一つのレビュー時間をへらす その結果、ベテランがコードを書いて価値を還元できなくなったり、レビュー時間の短縮によって深い指摘ができなくなってしまう Pull Requestの在庫を作ることなく、リアルタイムにリリース可能なコードを作っていくことによって、スループットが最大化できるという考え方に基づいて、ペアプロ／モブプロが推進されている ペアプログラミング ペアプログラミングの進め方 コードを書く前に方向づけを行う 盛り上がりすぎて脱線したり、そもそもの目標を忘れたり…ということが発生するので、最初に方向付けを行う。
最終目標を決める 機能の実装の区切りやバグの修正が完了するまで…など 大体二時間くらいで達成できそうな目標がよさそう TODOリストを作る スムーズに走り出すため、やることをTODOリストとして書き出す # TODOリストのイメージ - [x]複数ファイルをコマンドラインから指定する方法を決める - [x]ファイルの中身をマージするか個別に処理するか決める - [ ]コマンドライン引数の処理 - [ ]単一実績ファイル処理部分の切り出し - [ ]テストを書く - [ ]ステージングで動作確認 TODOリストから最初の目標を決める コードを書きながら会話し、考えを共有する ペアプログラミングで一番大事なのは会話。
ドライバーはコードを書くだけでなく、喋りながらコードを書く しゃべる内容は「今考えていること」 これから書こうと思っているコードのことや、迷ってモヤモヤしている設計判断のことなどをナビゲーターに喋りかける ナビゲーターの仕事は、まずドライバーの仕事をよく聞いて協力すること いい意見は褒め、あいまいさがあれば視点を変えて聞き返したりなど コーディング中に入る間違いは、隣で見ているナビゲーターのほうが気づきやすいので、些細なミスやtypoなどもすぐいう 設計に関して先回りしてかんがえておくことで、プログラミングを順調にすすめることができる ロールを交代する ドライバーはとにかく疲れるので、一定期間やステップ毎などの区切りで、交代するのがよい
TDDをするとなおよい テストで予め目標をわかりやすくできる モブプログラミング ペアのデメリットとして、情報がペア内で収まってしまうという点がある。プログラミングを通して得られる情報を多くのメンバーで共有するため、多人数で行うモブプログラミングがある
...</p>
  </div>
  <footer class="entry-footer"><span title='2021-01-27 18:53:27 +0900 JST'>January 27, 2021</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;tana2034</footer>
  <a class="entry-link" aria-label="post link to ペアプロ／モブプロについて学ぶ" href="http://localhost:1313/docs/2021/01/pair_programming_mob_programming/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">[ruby]begin
    </h2>
  </header>
  <div class="entry-content">
    <p>[ruby]begin rubyの例外処理について学ぶ
begin do_something rescue recover else xxx ensure must_to_do end rescueの後ろには、エラータイプが指定できる。 エラータイプが省略された場合は、StandardErrorのサブクラスである全ての例外を補足する。
else節 本体の実行でエラーが発生しなかった場合に評価される
ensure節 begin 式を終了する直前に必ず ensure 節の本体を評価する begin式全体の評価値は、本体／rescue節／else節のうち最後に評価された文の値となる 各節において文が存在しなかったときの値はnilで、いずれにしてもensure節の値は無視される
beginはなしでもできる クラスやmoduleの定義の中では、begin句がなくてもrescue句を書くことができる
</p>
  </div>
  <footer class="entry-footer"><span title='2020-12-08 18:54:54 +0900 JST'>December 8, 2020</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;tana2034</footer>
  <a class="entry-link" aria-label="post link to [ruby]begin" href="http://localhost:1313/docs/2020/12/ruby_begin/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">[rails]N&#43;1クエリ問題と解決方法
    </h2>
  </header>
  <div class="entry-content">
    <p>[Rails]N&#43;1クエリ問題と解決方法 N&#43;1クエリ問題について、よくわかっていなかったので調査してみました。
N&#43;1クエリ問題とは N&#43;1クエリ問題とは、Tree 状の情報を DB から読み出す際、全レコードの取得に一つ＋各レコード分だけ SQL を発行してしまう問題
http://akasata.com/articles/103
Users.where(active: true).each do |user| user.items.each do |item| # この時、select * from items where id = ... というクエリがレコード数だけ投げられる puts item.name end end railsでの対処方法(includes, preload, eager_load) この問題は、railsの公式ドキュメントでも触れられています。
N&#43;1クエリ問題を解決する
https://moneyforward.com/engineers_blog/2019/04/02/activerecord-includes-preload-eagerload/
includes 公式ドキュメントでは、このN&#43;1クエリ問題を解決するためにこのincludesを利用することを紹介しています。
includesを指定すると、Active Recordは指定されたすべての関連付けが最小限のクエリ回数で読み込まれるようにしてくれます。
clients = Client.includes(:address).limit(10) clients.each do |client| puts client.address.postcode end このとき発行されるクエリはSELECT * FROM clients LIMIT 10と SELECT addresses.* FROM addresses WHERE (addresses.client_id IN (1,2,3,4,5,6,7,8,9,10))の2件なので、相当減ったと言えると思います。
しかし、最小限のクエリ回数で読み込まれるというのはどういうことなのでしょうか。
これは、内部でpreload とeager_loadを場面によって使い分けているため、このように書かれているようです。
そうなると、preloadとeager_loadとはなんなのか、という話になってきます。
preload preloadは、関連テーブルを別クエリで取得する
User.preload(:posts) # SELECT &#34;posts&#34;.* FROM &#34;posts&#34; WHERE &#34;posts&#34;.&#34;user_id&#34; IN (1, 2, 3) メモリ使用量の点でeager_loadより有利なため、基本的にincludesを利用した際はpreloadが採用されるようです。
...</p>
  </div>
  <footer class="entry-footer"><span title='2020-12-07 17:51:39 +0900 JST'>December 7, 2020</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;tana2034</footer>
  <a class="entry-link" aria-label="post link to [rails]N&#43;1クエリ問題と解決方法" href="http://localhost:1313/docs/2020/12/rails_active_record_n_plus_1/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">[rails]Service Objectの導入と実装
    </h2>
  </header>
  <div class="entry-content">
    <p>[rails]Service Objectの導入と実装 Railsで実装を追加していてServiceというのを使っているのを発見したので、これについて調査
導入する目的はなにか ActiveRecordモデルが肥大化して分割したい場合に使用する。 ModelがFatになった場合、たいてい「単一責任の原則」に反している場合が多いと思われる。（単一責任の原則とは、「1つのクラスは1つの責務を持つ」考え方で、「クラスに変更が起こる理由は、一つであるべき」とされている。変更に複数の理由があるような場合、それは複数のクラスに分割したほうが、責務が凝集する、この辺はよくわかっていないので、あとでやる）
どういった場合に導入するのがよいか アクションが複雑になる場合 アクションが複数のモデルに渡って動作する場合 アクションから外部サービスとやり取りする場合 アクションが背後のモデルの中核をなすものでない場合 一定期間ごとに古くなったデータを消去する アクションの実行方法が多岐に渡る場合 どうやって導入するか Railsにおけるサービスクラスのオリジナルルール 参考にした記事でも、他の記事でも、ルールの通りに実装することが推奨される。 これは、このあとに示すようにアンチパターンに
命名規則を1つに定める Service ObjectのClass命名ルールを定める。 orをつける (例　) 動詞&#43;名詞&#43;Serviceをつける 直接インスタンス化しない 基本的には呼び出し方法が固定なので、インスタンスを作ることに意義がない また、呼び出す動作を統一するためにも直接callを呼べるような実装にする
def self.call(*args) new(*args).call end この挙動をモジュール化して各Serviceに読み込ませるとより処理が統一できてよい
呼び出し方法を1つに定める call, run, perform, executeなど、いずれかに呼びだし方法を統一する 責務を一つに絞り込む 呼び出し方法が統一されているので、絞り込まざるを得ない 例えば、DeleteやCreateなどいろんな動作をさせたい場合は、ManageUserのような汎用的な名前でなく、DeleteUserやCreateUserなどの複数のServiceに分けたほうがよい コンストラクタを複雑にしない 引数をserviceのインスタンス変数に保存する、など、限定的な動作に留める def initialize(user_id:) @user_id = user_id end callメソッドの引数をシンプルにする 結果はステートリーダー経由で返す callメソッドがServiceObject自身を返すようにするとより柔軟になる
callメソッドの可読性を下げないようにする callメソッドはService Objectの中心となるメソッドのため、できるだけ読みやすく保つ アンチパターンを考える Service Objectがアンチパターンである理由とよりよい代替手段（翻訳）
Service Objectを縛るルールが特にないので、メソッドが複雑化しやすい 俺が悪かった。素直に間違いを認めるから、もうサービスクラスとか作るのは止めてくれ
無秩序になると、ただただロジックが蓄積していくだけの場所になりかねず、そうするとController, Modelとの差別化ができず、ソースコードを追うことが辛くなる。 これはModelに書くべきことじゃない、とわかっているものを、ルールにそってService Objectとして扱うのがよいと思う。
感想 Service Objectは、Modelの責務外と思われるロジックを書くのに使うと良い その際には、各Service Objectには単一の責務だけを追わせるようにし、ルールに従うことで過剰なロジックを背負わないように気をつける Service Objectが肥大すると可読性が落ちるのはModelの肥大化と一緒、Classの責務について考えつつ実装をすすめる おまけ　Service Objectはどこからきたのか 使ってみた感想〜みたいな例を除くと、記事となっているのはこの辺り
...</p>
  </div>
  <footer class="entry-footer"><span title='2020-07-15 22:02:50 +0900 JST'>July 15, 2020</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;tana2034</footer>
  <a class="entry-link" aria-label="post link to [rails]Service Objectの導入と実装" href="http://localhost:1313/docs/2020/07/rails_service_object/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">レビューについて
    </h2>
  </header>
  <div class="entry-content">
    <p>レビューについて これまであまりレビューしてこなかったので、WEB&#43;DB PRESS vol.96のレビュー実践研修を読んで、レビュー文化について学ぶ
レビューの目的 バグの早期発見 コードのクオリティを高める チームを強くする レビューをするときに大事なこと 人に対してでなく、コードに対してレビューする Gerald Winbergの「エゴレスプログラミング」の考え方を大事にする 良いものを作ろうというところにレビューする側・される側がお互いにフォーカスすることが大事 レビューの基本 レビュイーがレビューを依頼する前に心がけたいこと 自分でも見直して、表記の揺れや改めて修正すべきところがないか見直す 作業のゴールを明示する これは何をしている実装なのか？がわからないと、レビュワーも困る コミットを意味のある単位で分割する コミットの一単位があまり大きくなりすぎず、レビュイーの思考過程を追えるような内容だと、レビュワーが理解しやすい コードを分割する コード量が多すぎるとレビュワーがカバーするのが大変 また、差し戻された場合の修正量も多くなってしまうため、一度の修正量が1000行などだったら、複数のレビューに分割したほうが双方にとってよい 自分のしないこと、うまくいかなかったことなどもかいておくとよりお互いの認識の齟齬がなくなる 必要な実装と思われるものが入っていないと、レビュワーが気になる 今回はやらない、次の実装でやる、などがかいてあると、認識が共有できてGood 「このパターンはどうだろう」「それはやろうとしてできなかった」というやりとりは割と頻繁にある レビュイーの試行錯誤をかいておくと、レビュワーも認識が深まる レビュワーがレビューをするときに心がけること 期待する結果を明確に伝える 曖昧な言葉でいうと、正確な意図が把握できず、次のアクションが起こしづらくなる 期待する結果を伝える ここ、なんでこうなっちゃったんですかねぇ……。 ↓ - プロダクトが仕様を満たしていないので、満たすように変更してほしい - なぜそのような設計になったのか理解できないので、説明をうけて理解したい - 問題に対してもっと良い解決策があるので、相手にも知ってほしいし、実装を変更してほしい - 自分だったらこうするという実装例を示し 自分だったら、こういう実装じゃなくて、こうするかなあ。 （案を採用してほしいのか、知見を共有したいのかがわかりづらい） ↓ 自分はこんな実装を思いつきました。ですがこの実装も全く問題ないですね。もし私の案のほうがよさそうだったら採用してください。 認識のズレをへらすために
FYIやIMO、SHOULD、MUSTなどの定型句を使うと、自分のレビューにあたっての意見が手短に伝わりやすくなる フィードバックには必ず理由を添える
どういう理由で修正を求めるかわかりづらいと、レビュイーも修正の意図が汲めない レビューは命令ではないので、レビュイーの納得を得るための説明が必要 ダメ出しだけではない
その他 フェーズを意識したレビュー チームで意識すること レビューの負荷が一人によらないようにする 自分より練度の高い相手もレビューする 可能な限り属人性を排除する 全体を通して レビューでは、レビュワーとレビュイーの目的意識を同じところに持っていくことが大事で、 そのための認識のズレの修正や、コミュニケーションにおける情報伝達を軽視しないようにすると、 よりよいレビューにつながりそうという意識になりました。
</p>
  </div>
  <footer class="entry-footer"><span title='2020-07-05 19:22:08 +0900 JST'>July 5, 2020</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;tana2034</footer>
  <a class="entry-link" aria-label="post link to レビューについて" href="http://localhost:1313/docs/2020/07/review/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">[circleci]ローカルマシンでcircleciのジョブを動かす
    </h2>
  </header>
  <div class="entry-content">
    <p>[circleci]ローカルマシンでcircleciのジョブを動かす こちらを参考にCircleCIのジョブをローカルで動かす
日本語
インストール macOSの場合は下記コマンド
curl -fLSs https://raw.githubusercontent.com/CircleCI-Public/circleci-cli/master/install.sh | bash # Starting installation. # Installing CircleCI CLI v0.1.7411 # Installing to /usr/local/bin # /usr/local/bin/circleci circleci version # 0.1.7411&#43;93b9d40 (release) update circleci update circleci switch 設定 事前にAPI TOKENを作ってから、下記コマンドで自分のアカウントを設定する
circleci setup Configファイルのバリデーション circleci config validate 自分のマシンでコンテナを動かす https://circleci.com/docs/2.0/local-cli/#run-a-job-in-a-container-on-your-machine やっとここまできた
circleci local execute これでうまくいけば、万事OK…なのだけど、うまくいかない
実行中にエラー ... ====&gt;&gt; Checkout code #!/bin/bash -eo pipefail mkdir -p /home/circleci/project &amp;&amp; cd /tmp/_circleci_local_build_repo &amp;&amp; git ls-files | tar -T - -c | tar -x -C /home/circleci/project &amp;&amp; cp -a /tmp/_circleci_local_build_repo/.git /home/circleci/project tar: circle.yml: Cannot stat: No such file or directory tar: Exiting with failure status due to previous errors Error: Exited with code exit status 2 Step failed Error: runner failed (exited with 101) Task failed Error: task failed 設定ファイルをコミットしたら解消した。その後はコミットしなくても反映されたので、謎だけど…
...</p>
  </div>
  <footer class="entry-footer"><span title='2020-05-18 08:39:22 +0900 JST'>May 18, 2020</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;tana2034</footer>
  <a class="entry-link" aria-label="post link to [circleci]ローカルマシンでcircleciのジョブを動かす" href="http://localhost:1313/docs/2020/05/circleci_run_a_job_on_my_machine/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">[circleci]1から2へ移行する
    </h2>
  </header>
  <div class="entry-content">
    <p>[circleci]1から2へ移行する 下記のドキュメントを参考に、1から2へ移行する
https://circleci.com/docs/ja/2.0/migrating-from-1-2/
circle.ymlの移行 これまで使用していたcircle.ymlファイルを.circleci/config.ymlに移行していくことになる。
このステップに従って変更する
移行ステップ circle.ymlを新しい.circleciディレクトリに移動する circle.yml -&gt; config.yml にリネーム version: 2 の記載をファイル先頭に追加する versionの記載の下に下記の二行を追加する。もしmachine: という構成があったら、それを以下と置き換える。 jobs: build: 5.dockerイメージの記述をする。以下のように言語・バージョンを指定していた場合、dockerイメージとそのバージョンに置き換える。
# 移行前 ruby: version: # 移行後 docker: - image: circleci/ruby:2.3-jessie checkoutはstepsの配下にネストする。コマンドは - run: の後ろにかく # 移行前 checkout: post: - mkdir -p /tmp/test-data - echo &#34;foo&#34; &gt; /tmp/test-data/foo # 移行後 steps: - checkout - run: mkdir -p /tmp/test-data - run: echo &#34;foo&#34; &gt; /tmp/test-data/foo また、checkout: の記述がなくても、steps: は追加しなくてはならない
(optional) 必要があれば add_ssh_keysを追加して、SSHができるようにしておく 出来上がったYAMLをバリデータ にかけてチェックする。 Workflowsを構成する https://circleci.com/docs/ja/2.0/workflows/
...</p>
  </div>
  <footer class="entry-footer"><span title='2020-05-17 21:35:16 +0900 JST'>May 17, 2020</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;tana2034</footer>
  <a class="entry-link" aria-label="post link to [circleci]1から2へ移行する" href="http://localhost:1313/docs/2020/05/circleci_from_1_to_2/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">[Rubymine][VSCode]デバッガを使う
    </h2>
  </header>
  <div class="entry-content">
    <p>[Rubymine][VSCode]デバッガを使う RubymineとVSCodeを比較中のため、どちらにもデバッガを導入しています
環境 MacOS Catalina 10.15.3 Rubymine https://pleiades.io/help/ruby/debugging-code.html https://pleiades.io/help/ruby/starting-the-debugger-session.html https://pleiades.io/help/ruby/running-applications.html
必要なgemのインストール 私の場合はGemfileには追加できないので直接追加します
cd /path/to/project gem install debase gem install ruby-debug-ide 実行/デバッグ構成を作成 https://pleiades.io/help/ruby/run-debug-configuration.html
私の場合は環境変数を設定したいので、別でConfigurationを自分で作成 RAILS_ENVの変更なので選択肢がdevelopment production testしか選べないのつらいと思ったけど普通に環境変数として追加すればOKだった 実行 https://pleiades.io/help/ruby/starting-the-debugger-session.html ブレークポイントをセットして指定のConfigurationでDebug開始すると止まる！
VSCode 必要なGemのインストール これはRubymineと同じ
Configurationを作成 https://code.visualstudio.com/docs/editor/debugging#_launch-configurations この辺を参考にlaunch.jsonを作成する
launch.json { &#34;version&#34;: &#34;0.2.0&#34;, &#34;configurations&#34;: [ { &#34;name&#34;: &#34;Debug fril_api&#34;, &#34;type&#34;: &#34;Ruby&#34;, &#34;request&#34;: &#34;launch&#34;, &#34;cwd&#34;: &#34;${workspaceRoot}&#34;, &#34;program&#34;: &#34;${workspaceRoot}/bin/rails&#34;, &#34;showDebuggerOutput&#34;: true, // useBundlerオプションはGemfileにdebase, ruby-debug-ideを追加している人だけで、gem installで入れたような場合には不要だった // &#34;useBundler&#34;: true, &#34;pathToRDebugIDE&#34;: &#34;/Users/USERNAME/.rbenv/versions/2.3.1/bin/rdebug-ide&#34;, &#34;args&#34;: [&#34;server&#34;] } ] } 実行 うごいた
感想など 導入 導入自体はRubymineのほうが設定値も少なくて楽と思う とはいえVSCodeもネット上に文献が多いのでそんなに苦労しなかった 使い心地 個人的には、Rubymineのほうが変数の一覧はみやすいかなと思った ただ、RubymineでDebuggerを立ち上げるとMacbookが唸りだすので、VSCodeのほうが軽いかなという気はした </p>
  </div>
  <footer class="entry-footer"><span title='2020-03-20 09:43:18 +0900 JST'>March 20, 2020</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;tana2034</footer>
  <a class="entry-link" aria-label="post link to [Rubymine][VSCode]デバッガを使う" href="http://localhost:1313/docs/2020/03/rubymine_vscode_debug/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">VSCodeを利用してRubyのDebugを行う
      <span class="entry-hint" title="Draft">
        <svg xmlns="http://www.w3.org/2000/svg" height="20" viewBox="0 -960 960 960" fill="currentColor">
          <path
            d="M160-410v-60h300v60H160Zm0-165v-60h470v60H160Zm0-165v-60h470v60H160Zm360 580v-123l221-220q9-9 20-13t22-4q12 0 23 4.5t20 13.5l37 37q9 9 13 20t4 22q0 11-4.5 22.5T862.09-380L643-160H520Zm300-263-37-37 37 37ZM580-220h38l121-122-18-19-19-18-122 121v38Zm141-141-19-18 37 37-18-19Z" />
        </svg>
      </span>
    </h2>
  </header>
  <div class="entry-content">
    <p>VSCodeを利用してRubyのDebugを行う Remote Development機能でデバッグ試してみる うまく行かなかった docker-compose.ymlのcommandをbundle exec rdebug-ide --debug --host 0.0.0.0 --port 1234 -- rails s -p 3000 -b 0.0.0.0では、Railsサーバは立ち上がっていないようだった 参考文献 debugging-Ruby-on-Rails　最も参考になるけどうまくいかなっかった ruby debugging in vscode 参考になる Debugging a Rails server in Visual Studio Code ruby-debug-ide Debugging in a container </p>
  </div>
  <footer class="entry-footer"><span title='2020-03-18 09:22:58 +0900 JST'>March 18, 2020</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;tana2034</footer>
  <a class="entry-link" aria-label="post link to VSCodeを利用してRubyのDebugを行う" href="http://localhost:1313/docs/2020/03/vscode_docker_debug/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">[Sidekiq]はじめてのSidekiq
    </h2>
  </header>
  <div class="entry-content">
    <p>[Sidekiq]はじめてのSidekiq これを参考に学ぶ
Sidekiqとは RubyのBackground処理を行うためのフレームワーク。
はじめてみる Workerを作る class HardWorker include Sidekiq::Worker def perform(name, count) # do something end end Workerを実行する 呼び出すときは、performじゃなく、perform_asyncとかperform_inとかを使う rails cとかirbで下記のように呼び出すと実行できる
HardWorker.perform_async(&#39;bob&#39;, 5) perform_in(interval, *args) 指定した時間後に実行する perform_at(timestamp, *args)　指定した時間に実行する Basics https://github.com/mperham/sidekiq/wiki/The-Basics
Client 下記の書き方で、ジョブを追加することができる。 Workerの処理を実行する書き方として、２つは同じ
MyWorker.perform_async(1, 2, 3) Sidekiq::Client.push(&#39;class&#39; =&gt; MyWorker, &#39;args&#39; =&gt; [1, 2, 3]) # Lower-level generic API Redis https://github.com/mperham/sidekiq/wiki/Using-Redis
ジョブをRedisに蓄積します。
初期設定 # config/initializers/sidekiq.rb Sidekiq.configure_server do |config| config.redis = { url: &#39;redis://redis.example.com:7372/0&#39; } end Sidekiq.configure_client do |config| config.redis = { url: &#39;redis://redis.example.com:7372/0&#39; } end Server sidekiqサーバがRedisに追加されたジョブを監視して、実行
Best Practice Workerに渡せる引数は文字列や数値、配列、ハッシュ（Rubyオブジェクトなどは渡せない） Workerには冪等性があるべき Error Handling https://github.com/mperham/sidekiq/wiki/Error-Handling あとでよむ
Advanced Options https://github.com/mperham/sidekiq/wiki/Advanced-Options あとでよむ
...</p>
  </div>
  <footer class="entry-footer"><span title='2020-03-16 15:32:11 +0900 JST'>March 16, 2020</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;tana2034</footer>
  <a class="entry-link" aria-label="post link to [Sidekiq]はじめてのSidekiq" href="http://localhost:1313/docs/2020/03/sidekiq_getting_started/"></a>
</article>
<footer class="page-footer">
  <nav class="pagination">
    <a class="prev" href="http://localhost:1313/docs/page/2/">
      «&nbsp;Prev&nbsp;
    </a>
    <a class="next" href="http://localhost:1313/docs/page/4/">Next&nbsp;&nbsp;»
    </a>
  </nav>
</footer>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="http://localhost:1313/">tana2034</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
