---
title: "ペアプロ／モブプロについて学ぶ"
date: 2021-01-27T18:53:27+09:00
---

# ペアプロ／モブプロについて学ぶ

WEB+DB Press vol.102の特集「はじめてのペアプロ・モブプロ」を参考に、ペアプロ・モブプロについて学びました。

## ペアプログラミング・モブプログラミングとは

プログラミングとプログラムの改良を2人で行うことをペアプログラミングという。
これを複数人（3〜5人）でやる場合、モブプログラミングという。

### ロールについて

キーボードの前に実際に座っている人は「ドライバー」、ドライバーの隣に座り、ドライバーと会話しながら導く人を「ナビゲーター」と呼び、この「ドライバー」がメインでコーディングをしていく。「ナビゲーター」はドライバーと会話をしながら、ドライバーを導く。「ドライバー」は一人でずっとこなすのではなく、交代するのが普通。

### ペアプロ／モブプロのメリット

#### 作業への集中と質の向上

- 一人ではないので緊張感が生まれ、集中することができる
- 考えていることを口に出しながらプログラミングを行うため、発話による思考の整理ができる
- リアルタイムで指摘できるため、コードの可読性、保守性が向上する
- 他の人の目にふれるため、軽微なミスが減る

#### 知識と学びの共有

- 新人教育などで利用すると、リアルタイムで知見が共有できる
- コードからだけでなく、コーディングの過程から学ぶことができる
- 複数人でコーディングするため、実装内容について情報が共有できる

#### 楽しさとチームビルディング

#### 在庫を減らし、スループットを最大化できる

- Pull Requestのレビューはプロジェクトの進行においてボトルネックになりがち
- Pull Requestがいくつも貯まると、以下の事象が発生する
    - ベテランはコードを書くのをやめ、レビューに専念する
    - レビュー速度を上げるため、一つ一つのレビュー時間をへらす
- その結果、ベテランがコードを書いて価値を還元できなくなったり、レビュー時間の短縮によって深い指摘ができなくなってしまう
- Pull Requestの在庫を作ることなく、リアルタイムにリリース可能なコードを作っていくことによって、スループットが最大化できるという考え方に基づいて、ペアプロ／モブプロが推進されている

## ペアプログラミング

### ペアプログラミングの進め方

#### コードを書く前に方向づけを行う

盛り上がりすぎて脱線したり、そもそもの目標を忘れたり…ということが発生するので、最初に方向付けを行う。

- 最終目標を決める
  - 機能の実装の区切りやバグの修正が完了するまで…など
  - 大体二時間くらいで達成できそうな目標がよさそう
- TODOリストを作る
  - スムーズに走り出すため、やることをTODOリストとして書き出す
```
# TODOリストのイメージ
- [x]複数ファイルをコマンドラインから指定する方法を決める
- [x]ファイルの中身をマージするか個別に処理するか決める
- [ ]コマンドライン引数の処理
- [ ]単一実績ファイル処理部分の切り出し
- [ ]テストを書く
- [ ]ステージングで動作確認
```
- TODOリストから最初の目標を決める

#### コードを書きながら会話し、考えを共有する

ペアプログラミングで一番大事なのは会話。

- ドライバーはコードを書くだけでなく、喋りながらコードを書く
- しゃべる内容は「今考えていること」
   - これから書こうと思っているコードのことや、迷ってモヤモヤしている設計判断のことなどをナビゲーターに喋りかける
- ナビゲーターの仕事は、まずドライバーの仕事をよく聞いて協力すること
  - いい意見は褒め、あいまいさがあれば視点を変えて聞き返したりなど
  - コーディング中に入る間違いは、隣で見ているナビゲーターのほうが気づきやすいので、些細なミスやtypoなどもすぐいう
  - 設計に関して先回りしてかんがえておくことで、プログラミングを順調にすすめることができる

#### ロールを交代する

ドライバーはとにかく疲れるので、一定期間やステップ毎などの区切りで、交代するのがよい

#### TDDをするとなおよい

- テストで予め目標をわかりやすくできる

## モブプログラミング

ペアのデメリットとして、情報がペア内で収まってしまうという点がある。プログラミングを通して得られる情報を多くのメンバーで共有するため、多人数で行うモブプログラミングがある

### モブプログラミングの進め方

#### できる限り大画面のディスプレイを用意する

#### 同時に解決する課題を1つに絞る

- 並行して複数の作業にとりくむと作業後に同期させる必要があるため、課題を絞る

#### ドライバーは積極的に助けを求める

- ドライバーは「独り言」を言うのが大事
- そうしないと、まわりのナビゲーターが助けられない
- 話しながら手を動かす必要がある

#### ナビゲーターが手分けして調査する

- ナビゲーターは、ドライバーを見ながらなるべく円滑に問題を解決できるようにサポートする
- 情報検索用に個別PCを持ったりなどして、作業に必要な情報を自律的に動いて集める

#### 途中まで実装するほうが議論しやすいときは、進めてみる

- 複数のやり方で悩んだ場合、シンプルですぐできるやり方はまず選んで、モブ全体が深みにハマるのを避ける
- 一度実装したほうが情報量が増える
- やってみて、どうもうまく行かない場合も、そういう情報が得られたと思って前向きにとらえる

#### ドライバーを交代する

### モブプログラミングを支える文化

- 基本的に「チーム全体で課題を解決しよう」という考え方に基づいている
- できる限りリアリティを持った成果物を使って、仮説検証のループを高速に回していこうとする

#### スモールチームで高速にすすめる

- 最適なモブの人数は3〜5人
- 作業を効率的にすすめるため、モブ内に必要となるすべてのスキルをあわせ、モブ内で作業を完結できるようにする
- 外部に依頼すると完了を待たなくてはいけなくなる

##### 高速な意思決定をするために、人々の中央に情報を集める

- プロダクトに関係する要件、コード、人々を常にモブに集める
- 全員が持っている情報を同期する
- すべてのメンバーが状況に対して意見を言え、責任を負う

### モブプログラミングの実践ノウハウ

- 毎日固定時間モブ作業（5時間くらい）
- ドライバーはナビゲーターが実装したくなったタイミングで交代
- モブへの出入りは自由
- 常にメインブランチでの開発（フィーチャーブランチなし）
- 作ったらすぐにデリバリ
- 雇用者への声を聞きに行き反映
- リリースと意見反映のサイクルを早められて、アジャイル的
